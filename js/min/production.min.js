$(function(){function a(a){if($(".menu").addClass("menu-open"),$("#label-text").val(b.prev("label").text()),$("#placeholder-text").val(b.attr("placeholder")),$("#error-text").val(b.next(".error").text()),b.next(".error").length>0?(a.find("#required").prop("checked",!0),a.find("#error-text").prop("disabled",!1)):(a.find("#required").prop("checked",!1),a.find("#error-text").prop("disabled",!0)),b.find("option").eq(0).is(":disabled")&&a.find("#placeholder").prop("checked",!0),b.is("input")&&$("#input-type").val(b.attr("type")),b.is("select")){var c=[];$(".select-menu #select-options").empty(),b.find("option").each(function(){c.push(this.innerHTML)}),$.each(c,function(a){$(".select-menu #select-options").append(c[a]),a<c.length-1&&$(".select-menu #select-options").append("\n")})}if(b.is(".radio-group")){$("#label-text").val(b.find(".radio-group-label").text());var c=[];$(".radio-menu #radio-options").empty(),b.find("label.radio").each(function(){c.push(this)}),$.each(c,function(a){$(".radio-menu #radio-options").append($.trim(c[a].innerText)),a<c.length-1&&$(".radio-menu #radio-options").append("\n")})}if(b.is(".checkbox-group")){$("#label-text").val(b.find(".checkbox-group-label").text());var c=[];$(".checkbox-menu #checkbox-options").empty(),b.find("label.checkbox").each(function(){c.push(this)}),$.each(c,function(a){$(".checkbox-menu #checkbox-options").append($.trim(c[a].innerText)),a<c.length-1&&$(".checkbox-menu #checkbox-options").append("\n")})}b.is(".free-text")&&a.find("#free-text").val(b[0].innerHTML),b.is("input.file")&&a.find("#free-text").val(b[0].innerHTML)}$(".accordion > h6").on("click",function(){$(this).find("span").html($(this).hasClass("open")?"+":"-"),$(this).toggleClass("open").next("div").stop(!0,!0).slideToggle(!0),$(".accordion h6").not(this).removeClass("open").next("div").slideUp(),$(".accordion h6").not(this).find("span").html("+")}),$(".accordion div h6").on("click",function(){$(this).find("span").html($(this).hasClass("open")?"+":"-"),$(this).toggleClass("open").next("div").stop(!0,!0).slideToggle(!0),$(".accordion div h6").not(this).removeClass("open").next("div").slideUp(),$(".accordion div h6").not(this).find("span").html("+")}),$(".js-drag-layout, .js-drag-field").draggable({revert:"invalid",helper:function(){return $(this).clone().width($(this).width())},cursor:"move"}),$(".js-drop-layout").droppable({tolerance:"pointer",accept:".js-drag-layout",drop:function(a,b){$(this).append($(b.draggable).clone().removeClass("js-drag-layout").append('<div class="delete-row">x</div>')),$(".grid").sortable({connectWith:".grid",handle:":not(.editable)"}),$(".js-drop-field").droppable({tolerance:"pointer",accept:".js-drag-field",greedy:!0,drop:function(a,b){var c=$(b.draggable).clone();c.removeClass("js-drag-field"),c.find(".temp-overlay").remove(),$(this).html(c)}})}});var b,c,d='<div class="input-menu"><div><label for="input-id">Input id</label><input type="text" id="input-id" /></div><div><label for="input-type">Input type</label><select name="Input type" id="input-type"><option value="text">text</option><option value="number">number</option><option value="email">email</option></select></div><div><label for="label-text">Label text</label><input type="text" id="label-text" /></div><div><label for="placeholder-text">Placeholder text</label><input type="text" id="placeholder-text" /></div><div class="required-checkbox"><label for="required">Required</label><input type="checkbox" id="required" /></div><div><label for="error-text">Error text</label><input type="text" id="error-text" disabled /></div><div><input type="submit" id="done" value="Done" /></div></div>',e='<div class="textarea-menu"><div><label for="input-id">Textarea id</label><input type="text" id="input-id" /></div><div><label for="label-text">Label text</label><input type="text" id="label-text" /></div><div><label for="placeholder-text">Placeholder text</label><input type="text" id="placeholder-text" /></div><div class="required-checkbox"><label for="required">Required</label><input type="checkbox" id="required" /></div><div><label for="error-text">Error text</label><input type="text" id="error-text" disabled /></div><div><input type="submit" id="done" value="Done" /></div></div>',f='<div class="select-menu"><div><label for="select-id">Select id</label><input type="text" id="input-id" /></div><div><label for="label-text">Label text</label><input type="text" id="label-text" /></div><div><label for="options">Options</label><textarea rows="10" id="select-options"></textarea></div><div class="placeholder-checkbox"><label for="placeholder">Placeholder (this will set the first option as an unselectable placeholder)</label><input type="checkbox" id="placeholder" /></div><div class="required-checkbox"><label for="required">Required</label><input type="checkbox" id="required" /></div><div><label for="error-text">Error text</label><input type="text" id="error-text" disabled /></div><div><input type="submit" id="done" value="Done" /></div></div>',g='<div class="radio-menu"> <div> <label for="group-name">Group name</label> <input type="text" id="group-name"/> </div><div> <label for="label-text">Label text</label> <input type="text" id="label-text"/> </div><div> <label for="radio-options">Options</label> <textarea rows="10" id="radio-options"></textarea> </div><div class="required-checkbox"> <label for="required">Required</label> <input type="checkbox" id="required"/> </div><div> <label for="error-text">Error text</label> <input type="text" id="error-text" disabled/> </div><div> <input type="submit" id="done" value="Done"/> </div></div>',h='<div class="checkbox-menu"> <div> <label for="group-name">Group name</label> <input type="text" id="group-name"/> </div><div> <label for="label-text">Label text</label> <input type="text" id="label-text"/> </div><div> <label for="checkbox-options">Options</label> <textarea rows="10" id="checkbox-options"></textarea> </div><div class="required-checkbox"> <label for="required">Required</label> <input type="checkbox" id="required"/> </div><div> <label for="error-text">Error text</label> <input type="text" id="error-text" disabled/> </div><div> <input type="submit" id="done" value="Done"/> </div></div>',i='<div class="freeTxt-menu"> <div> <label for="free-text">Text</label> <input type="text" id="free-text"/> </div><div> <div class="radio-group inline"> <label for="alignment">Alignment</label> <label class="radio" for="align-left"> <input type="radio" name="alignment" id="align-left" value="align-left">Left </label> <label class="radio" for="align-center"> <input type="radio" name="alignment" id="align-center" value="align-center">Centre </label> <label class="radio" for="align-right"> <input type="radio" name="alignment" id="align-right" value="align-right">Right </label> </div></div><div> <input type="submit" id="done" value="Done"/> </div></div>',j='<div class="file-menu"> <div> <label for="label-text">Label text</label> <input type="text" id="label-text"/> </div><div class="required-checkbox"> <label for="required">Required</label> <input type="checkbox" id="required"/> </div><div> <label for="error-text">Error text</label> <input type="text" id="error-text" disabled/> </div><div> <input type="submit" id="done" value="Done"/> </div></div>';$(window).resize(function(){c=$(".js-overlay-width").width(),$(".menu").css("width",c)}).resize(),$(document).on("click",".grid input.text, .grid input.number, .grid input.email, .grid input.file, .grid textarea, .grid select, .grid .radio-group, .grid .checkbox-group, .grid .free-text",function(c){b=$(this),$(".menu").hasClass("menu-open")&&$(".menu").empty(),b.is("input.text, input.number, input.email")&&($(".input-menu").length<1&&$(".menu").append(d),a($(".input-menu"),d)),b.is("textarea")&&($(".textarea-menu").length<1&&$(".menu").append(e),a($(".textarea-menu"),d)),b.is("select")&&($(".select-menu").length<1&&$(".menu").append(f),a($(".select-menu"),f)),b.is(".radio-group")&&($(".radio-menu").length<1&&$(".menu").append(g),a($(".radio-menu"),g)),b.is(".checkbox-group")&&($(".checkbox-menu").length<1&&$(".menu").append(h),a($(".checkbox-menu"),h)),b.is(".free-text")&&($(".freeTxt-menu").length<1&&$(".menu").append(i),a($(".freeTxt-menu"),i)),b.is("input.file")&&(c.preventDefault(),$(".file-menu").length<1&&$(".menu").append(j),a($(".file-menu"),j)),c.stopPropagation()}),$(document).on("keyup","#input-id",function(){b.attr("id",$(this).val()),b.prev("label").attr("for",$(this).val())}),$(document).on("change","#input-type",function(){b.attr({type:$(this).val(),"class":$(this).val()})}),$(document).on("keyup","#label-text",function(){b.prev("label").text($(this).val())}),$(document).on("keyup","#placeholder-text",function(){b.attr("placeholder",$(this).val())}),$(document).on("keyup","#error-text",function(){b.next(".error").text($(this).val())}),$(document).on("click","#required",function(){$(this).is(":checked")?($(this).parent().next().find("#error-text").prop("disabled",!1),b.parent().append('<div class="error">Validation message</div>')):($(this).parent().next().find("#error-text").prop("disabled",!0).val(""),b.parent().find(".error").remove())}),$(document).on("click","#placeholder",function(){$(this).is(":checked")?b.find("option").eq(0).attr("disabled","disabled").attr("selected","selected"):b.find("option").eq(0).removeAttr("disabled").removeAttr("selected")}),$(document).on("keyup","#group-name",function(){b.attr("id",$(this).val())}),$(document).on("keyup","#label-text",function(){b.find(".radio-group-label").text($(this).val())}),$(document).on("keyup","#label-text",function(){b.find(".checkbox-group-label").text($(this).val())});$(document).on("keyup","#select-options",function(){var a=$(this).val().split("\n");b.empty();for(var c=0;c<a.length;c++)b.append($("<option>"+a[c]+"</option>").attr("value",c))}),$(document).on("keyup","#radio-options",function(){var a=$(this).val().split("\n");b.find(".radio").remove();for(var c=0;c<a.length;c++)b.append($('<label class="radio" for="radio-'+(c+1)+'"><input type="radio" id="radio-'+(c+1)+'" name="radios" value="'+a[c]+'" />'+a[c]+"</label>"))}),$(document).on("keyup","#checkbox-options",function(){var a=$(this).val().split("\n");b.find(".checkbox").remove();for(var c=0;c<a.length;c++)b.append($('<label class="checkbox" for="checkbox-'+(c+1)+'"><input type="checkbox" id="checkbox-'+(c+1)+'" name="checkbox" value="'+a[c]+'" />'+a[c]+"</label>"))}),$(document).on("keyup","#free-text",function(){var a=$(this).val();b[0].innerHTML=a}),$(document).on("change",'input[name="alignment"]:radio',function(){b[0].classList.remove("align-left","align-center","align-right"),b[0].classList.add(this.value)}),$(document).on("click","#done",function(){setTimeout(function(){$(".input-menu, .select-menu").remove()},300),$(".menu").removeClass("menu-open")}),$(document).on("click",".delete-row",function(){$(this).parent(".row").remove()}),$(document).on("click",function(){$(".input-menu").length>0&&(isHovered=$(".input-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".input-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".select-menu").length>0&&(isHovered=$(".select-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".select-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".textarea-menu").length>0&&(isHovered=$(".textarea-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".textarea-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".radio-menu").length>0&&(isHovered=$(".radio-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".radio-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".checkbox-menu").length>0&&(isHovered=$(".checkbox-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".checkbox-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".freeTxt-menu").length>0&&(isHovered=$(".freeTxt-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".freeTxt-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".file-menu").length>0&&(isHovered=$(".file-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".file-menu").remove()},300),$(".menu").removeClass("menu-open")))})});
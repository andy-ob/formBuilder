$(function(){function a(a){if($(".menu").addClass("menu-open"),$("#label-text").val(b.prev("label").text()),$("#placeholder-text").val(b.attr("placeholder")),$("#error-text").val(b.next(".error").text()),b.next(".error").length>0?(console.log(a),a.find("#required").prop("checked",!0),a.find("#error-text").prop("disabled",!1)):(a.find("#required").prop("checked",!1),a.find("#error-text").prop("disabled",!0)),b.is("input")&&$("#input-type").val(b.attr("type")),b.is("select")){var c=[];$(".select-menu #select-options").empty(),b.find("option").each(function(){c.push(this.innerHTML)}),$.each(c,function(a){$(".select-menu #select-options").append(c[a]),a<c.length-1&&$(".select-menu #select-options").append("\n")})}}$(".accordion h6").on("click",function(){$(this).next("div").slideToggle(),$(".accordion h6").not(this).next("div").hide()}),$(".js-drag-layout, .js-drag-field").draggable({revert:"invalid",helper:function(){return $(this).clone().width($(this).width())},cursor:"move"}),$(".js-drop-layout").droppable({tolerance:"pointer",accept:".js-drag-layout",drop:function(a,b){$(this).append($(b.draggable).clone().removeClass("js-drag-layout").append('<div class="delete-row">x</div>')),$(".grid").sortable({connectWith:".grid",handle:":not(.editable)"}),$(".js-drop-field").droppable({tolerance:"pointer",accept:".js-drag-field",greedy:!0,drop:function(a,b){var c=$(b.draggable).clone();c.removeClass("js-drag-field"),c.find(".temp-overlay").remove(),$(this).html(c)}})}});var b,c,d='<div class="input-menu"><div><label for="input-id">Input id</label><input type="text" id="input-id" /></div><div><label for="input-type">Input type</label><select name="Input type" id="input-type"><option value="text">text</option><option value="number">number</option><option value="email">email</option></select></div><div><label for="label-text">Label text</label><input type="text" id="label-text" /></div><div><label for="placeholder-text">Placeholder text</label><input type="text" id="placeholder-text" /></div><div class="required-checkbox"><label for="required">Required</label><input type="checkbox" id="required" /></div><div><label for="error-text">Error text</label><input type="text" id="error-text" disabled /></div><div><input type="submit" id="done" value="Done" /></div></div>',e='<div class="textarea-menu"><div><label for="input-id">Textarea id</label><input type="text" id="input-id" /></div><div><label for="label-text">Label text</label><input type="text" id="label-text" /></div><div><label for="placeholder-text">Placeholder text</label><input type="text" id="placeholder-text" /></div><div class="required-checkbox"><label for="required">Required</label><input type="checkbox" id="required" /></div><div><label for="error-text">Error text</label><input type="text" id="error-text" disabled /></div><div><input type="submit" id="done" value="Done" /></div></div>',f='<div class="select-menu"><div><label for="select-id">Select id</label><input type="text" id="input-id" /></div><div><label for="label-text">Label text</label><input type="text" id="label-text" /></div><div><label for="options">Options</label><textarea rows="10" id="select-options"></textarea></div><div class="placeholder-checkbox"><label for="placeholder">Placeholder</label><input type="checkbox" id="placeholder" /></div><div class="required-checkbox"><label for="required">Required</label><input type="checkbox" id="required" /></div><div><label for="error-text">Error text</label><input type="text" id="error-text" disabled /></div><div><input type="submit" id="done" value="Done" /></div></div>';$(window).resize(function(){c=$(".js-overlay-width").width(),$(".menu").css("width",c)}).resize(),$(document).on("click",".grid input, .grid textarea, .grid select",function(c){b=$(this),$(".menu").hasClass("menu-open")&&$(".menu").empty(),b.is("input")&&($(".input-menu").length<1&&$(".menu").append(d),a($(".input-menu"),d)),b.is("textarea")&&($(".textarea-menu").length<1&&$(".menu").append(e),a($(".textarea-menu"),d)),b.is("select")&&($(".select-menu").length<1&&$(".menu").append(f),a($(".select-menu"),f)),c.stopPropagation()}),$(document).on("keyup","#input-id",function(){b.attr("id",$(this).val()),b.prev("label").attr("for",$(this).val())}),$(document).on("change","#input-type",function(){b.attr("type",$(this).val())}),$(document).on("keyup","#label-text",function(){b.prev("label").text($(this).val())}),$(document).on("keyup","#placeholder-text",function(){b.attr("placeholder",$(this).val())}),$(document).on("keyup","#error-text",function(){b.next(".error").text($(this).val())}),$(document).on("click","#required",function(){$(this).is(":checked")?($(this).parent().next().find("#error-text").prop("disabled",!1),b.parent().append('<div class="error">Validation message</div>')):($(this).parent().next().find("#error-text").prop("disabled",!0).val(""),b.parent().find(".error").remove())});$(document).on("keyup","#select-options",function(){var a=$(this).val().split("\n");b.empty();for(var c=0;c<a.length;c++)b.append($("<option>"+a[c]+"</option>").attr("value",c))}),$(document).on("click","#done",function(){setTimeout(function(){$(".input-menu, .select-menu").remove()},300),$(".menu").removeClass("menu-open")}),$(document).on("click",".delete-row",function(){$(this).parent(".row").remove()}),$(document).on("click",function(){$(".input-menu").length>0&&(isHovered=$(".input-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".input-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".select-menu").length>0&&(isHovered=$(".select-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".select-menu").remove()},300),$(".menu").removeClass("menu-open"))),$(".textarea-menu").length>0&&(isHovered=$(".textarea-menu").is(":hover"),0==isHovered&&(setTimeout(function(){$(".textarea-menu").remove()},300),$(".menu").removeClass("menu-open")))})});